{% extends "base.html" %}

{% block title %}{{ dashboard.name }} - DinkyDash{% endblock %}

{% block content %}
<div class="container layout-{{ dashboard.layout_size }}">
    <div class="dashboard-header">
        <h1>{{ dashboard.name }}</h1>
        <div class="dashboard-actions">
            <a href="{{ url_for('dashboard.list') }}" class="btn btn-secondary">All Dashboards</a>
        </div>
    </div>

    <!-- Dashboard content that auto-refreshes -->
    <div id="dashboard-content"
         hx-get="{{ url_for('dashboard.dashboard_content', dashboard_id=dashboard.id) }}"
         hx-trigger="every 30s"
         hx-swap="outerHTML">
        {% include 'dashboard/_content.html' %}
    </div>
</div>
{% endblock %}

{% block extra_head %}
<!-- Meta refresh fallback for non-JavaScript browsers -->
<meta http-equiv="refresh" content="60">
{% endblock %}

{% block extra_css %}
<style>
    .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #e5e7eb;
    }

    .dashboard-header h1 {
        margin: 0;
        color: #2c3e50;
    }

    .dashboard-actions {
        display: flex;
        gap: 1rem;
    }

    .tasks-section,
    .countdowns-section {
        margin-bottom: 3rem;
    }

    .tasks-section h2,
    .countdowns-section h2 {
        color: #2c3e50;
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
    }

    .task-person {
        font-size: 1.25rem;
        font-weight: 600;
        color: #3498db;
        margin-top: 0.5rem;
    }

    .countdown-days {
        font-size: 1.5rem;
        font-weight: 700;
        color: #e74c3c;
        margin: 0.5rem 0;
    }

    .countdown-date {
        font-size: 0.9rem;
        color: #7f8c8d;
        margin: 0;
    }

    /* HTMX loading indicator */
    .htmx-request .task-grid,
    .htmx-request .countdown-grid {
        opacity: 0.6;
        transition: opacity 0.3s;
    }
</style>
{% endblock %}
